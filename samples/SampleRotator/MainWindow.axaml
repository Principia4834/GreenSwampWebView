<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:gsw="using:GreenSwampWebView"
        xmlns:vm="using:SampleRotator.ViewModels"
        mc:Ignorable="d" d:DesignWidth="1200" d:DesignHeight="700"
        x:Class="SampleRotator.MainWindow"
        x:DataType="vm:MainViewModel"
        Title="SampleRotator - 3D Model Viewer"
        Width="1200" Height="700"
        MinWidth="800" MinHeight="600">

    <Design.DataContext>
        <vm:MainViewModel/>
    </Design.DataContext>

    <Grid ColumnDefinitions="*,280">
        
        <!-- 3D Viewport Panel (Left) -->
        <Border Grid.Column="0" 
                BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}" 
                BorderThickness="0,0,1,0">
            <gsw:WebView Name="WebViewControl"
                         NavigationStarting="WebView_NavigationStarting"
                         NavigationCompleted="WebView_NavigationCompleted"
                         NavigationFailed="WebView_NavigationFailed" />
        </Border>

        <!-- Control Panel (Right) -->
        <ScrollViewer Grid.Column="1" 
                      Padding="15">
            <StackPanel Spacing="15">
                
                <!-- Title -->
                <TextBlock Text="3D Model Controls" 
                           FontSize="18" 
                           FontWeight="Bold"
                           Margin="0,0,0,10"/>

                <!-- Load Model Section -->
                <Border BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                        BorderThickness="1"
                        CornerRadius="4"
                        Padding="10">
                    <StackPanel Spacing="10">
                        <TextBlock Text="Model File" 
                                   FontWeight="SemiBold"/>
                        <Button Name="LoadModelButton"
                                Content="Load OBJ File..."
                                HorizontalAlignment="Stretch"
                                Click="LoadModelButton_Click"/>
                        <TextBlock Name="ModelFileNameText"
                                   Text="No model loaded"
                                   FontSize="11"
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                   TextWrapping="Wrap"/>
                    </StackPanel>
                </Border>

                <!-- Configuration Origin Section -->
                <Border BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                        BorderThickness="1"
                        CornerRadius="4"
                        Padding="10">
                    <StackPanel Spacing="8">
                        <TextBlock Text="Configuration Origin" 
                                   FontWeight="SemiBold"/>
                        
                        <!-- Origin X -->
                        <StackPanel Spacing="4">
                            <TextBlock Text="X:"/>
                            <NumericUpDown Name="OriginXNumeric"
                                          Value="{Binding OriginX}"
                                          Increment="1"
                                          FormatString="0.##"
                                          Minimum="-10000"
                                          Maximum="10000"
                                          AllowSpin="True"
                                          ShowButtonSpinner="True"
                                          ValueChanged="OriginValueChanged"/>
                        </StackPanel>

                        <!-- Origin Y -->
                        <StackPanel Spacing="4">
                            <TextBlock Text="Y:"/>
                            <NumericUpDown Name="OriginYNumeric"
                                          Value="{Binding OriginY}"
                                          Increment="1"
                                          FormatString="0.##"
                                          Minimum="-10000"
                                          Maximum="10000"
                                          AllowSpin="True"
                                          ShowButtonSpinner="True"
                                          ValueChanged="OriginValueChanged"/>
                        </StackPanel>

                        <!-- Origin Z -->
                        <StackPanel Spacing="4">
                            <TextBlock Text="Z:"/>
                            <NumericUpDown Name="OriginZNumeric"
                                          Value="{Binding OriginZ}"
                                          Increment="1"
                                          FormatString="0.##"
                                          Minimum="-10000"
                                          Maximum="10000"
                                          AllowSpin="True"
                                          ShowButtonSpinner="True"
                                          ValueChanged="OriginValueChanged"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Configuration Orientation Section -->
                <Border BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                        BorderThickness="1"
                        CornerRadius="4"
                        Padding="10">
                    <StackPanel Spacing="8">
                        <TextBlock Text="Configuration Orientation" 
                                   FontWeight="SemiBold"/>
                        <TextBlock Text="(Spherical coordinates: Y-axis reference)"
                                   FontSize="10"
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        
                        <!-- Config Theta -->
                        <StackPanel Spacing="4">
                            <TextBlock Text="Theta (?): Angle from Y-axis"/>
                            <TextBlock Text="0° = +Y (up), 90° = XZ plane, 180° = -Y (down)"
                                       FontSize="10"
                                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                            <NumericUpDown Name="ConfigThetaNumeric"
                                          Value="{Binding ConfigTheta}"
                                          Increment="1"
                                          FormatString="0.#"
                                          Minimum="-180"
                                          Maximum="180"
                                          AllowSpin="True"
                                          ShowButtonSpinner="True"
                                          ValueChanged="ConfigOrientationChanged"/>
                        </StackPanel>

                        <!-- Config Phi -->
                        <StackPanel Spacing="4">
                            <TextBlock Text="Phi (?): Rotation in XZ plane"/>
                            <TextBlock Text="0° = +X axis, 90° = +Z axis, 180° = -X axis"
                                       FontSize="10"
                                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                            <NumericUpDown Name="ConfigPhiNumeric"
                                          Value="{Binding ConfigPhi}"
                                          Increment="1"
                                          FormatString="0.#"
                                          Minimum="-180"
                                          Maximum="180"
                                          AllowSpin="True"
                                          ShowButtonSpinner="True"
                                          ValueChanged="ConfigOrientationChanged"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Rotation Controls Section -->
                <Border BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                        BorderThickness="1"
                        CornerRadius="4"
                        Padding="10">
                    <StackPanel Spacing="10">
                        <TextBlock Text="Model Rotation" 
                                   FontWeight="SemiBold"/>
                        <TextBlock Text="(Additional rotation around configured origin)"
                                   FontSize="10"
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        
                        <!-- Theta Rotation Slider -->
                        <StackPanel Spacing="4">
                            <Grid ColumnDefinitions="*,Auto">
                                <TextBlock Grid.Column="0" Text="Theta (?): From Y-axis"/>
                                <TextBlock Grid.Column="1" 
                                          Text="{Binding RotationTheta, StringFormat='{}{0:F1}°'}"/>
                            </Grid>
                            <Slider Name="ThetaRotationSlider"
                                    Minimum="-90"
                                    Maximum="90"
                                    Value="{Binding RotationTheta}"
                                    TickFrequency="10"
                                    IsSnapToTickEnabled="False"
                                    ValueChanged="RotationSliderChanged"/>
                            <Grid ColumnDefinitions="*,*,*">
                                <TextBlock Grid.Column="0" 
                                          Text="-90°" 
                                          FontSize="10"
                                          HorizontalAlignment="Left"/>
                                <TextBlock Grid.Column="1" 
                                          Text="0°" 
                                          FontSize="10"
                                          HorizontalAlignment="Center"/>
                                <TextBlock Grid.Column="2" 
                                          Text="+90°" 
                                          FontSize="10"
                                          HorizontalAlignment="Right"/>
                            </Grid>
                        </StackPanel>

                        <!-- Phi Rotation Slider -->
                        <StackPanel Spacing="4">
                            <Grid ColumnDefinitions="*,Auto">
                                <TextBlock Grid.Column="0" Text="Phi (?): In XZ plane"/>
                                <TextBlock Grid.Column="1" 
                                          Text="{Binding RotationPhi, StringFormat='{}{0:F1}°'}"/>
                            </Grid>
                            <Slider Name="PhiRotationSlider"
                                    Minimum="-180"
                                    Maximum="180"
                                    Value="{Binding RotationPhi}"
                                    TickFrequency="10"
                                    IsSnapToTickEnabled="False"
                                    ValueChanged="RotationSliderChanged"/>
                            <Grid ColumnDefinitions="*,*,*">
                                <TextBlock Grid.Column="0" 
                                          Text="-180°" 
                                          FontSize="10"
                                          HorizontalAlignment="Left"/>
                                <TextBlock Grid.Column="1" 
                                          Text="0°" 
                                          FontSize="10"
                                          HorizontalAlignment="Center"/>
                                <TextBlock Grid.Column="2" 
                                          Text="+180°" 
                                          FontSize="10"
                                          HorizontalAlignment="Right"/>
                            </Grid>
                        </StackPanel>

                        <!-- Reset Button -->
                        <Button Name="ResetRotationButton"
                                Content="Reset Rotation"
                                HorizontalAlignment="Stretch"
                                Click="ResetRotationButton_Click"/>
                    </StackPanel>
                </Border>

                <!-- Status Section -->
                <Border BorderBrush="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                        BorderThickness="1"
                        CornerRadius="4"
                        Padding="10">
                    <StackPanel Spacing="5">
                        <TextBlock Text="Status" 
                                   FontWeight="SemiBold"/>
                        <TextBlock Name="StatusTextBlock"
                                   Text="Ready"
                                   FontSize="11"
                                   TextWrapping="Wrap"
                                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                    </StackPanel>
                </Border>

            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window>
